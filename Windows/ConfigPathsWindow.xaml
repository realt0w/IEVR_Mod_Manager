<Window x:Class="IEVRModManager.Windows.ConfigPathsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Configuration" Height="650" Width="1100"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource BgBrush}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <Label x:Name="ConfigTitleLabel" Grid.Row="0" Content="Configuration" 
               FontSize="18" FontWeight="Bold" 
               Foreground="{DynamicResource TextBrush}"
               Margin="0,0,0,10"/>

        <!-- Info Label -->
        <Label x:Name="ConfigInfoLabel" Grid.Row="1" Content="Configuration is saved automatically" 
               FontSize="10" FontStyle="Italic"
               Foreground="{DynamicResource TimestampBrush}"
               Margin="4,0,0,15"/>

        <!-- Game Path -->
        <Grid Grid.Row="2" Margin="0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="GamePathLabel" Grid.Column="0" Content="ðŸŽ® Game path:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left"/>
            <TextBox Grid.Column="1" x:Name="GamePathTextBox" 
                     Text="{Binding GamePath, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                     Margin="4,0" TextChanged="GamePathTextBox_TextChanged"/>
            <Button x:Name="BrowseButton" Grid.Column="2" Content="Browse..." 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="120" Click="BrowseGame_Click" Margin="4,0"/>
        </Grid>

        <!-- Cpk storage -->
        <Grid Grid.Row="3" Margin="0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="CpkStorageLabel" Grid.Column="0" Content="ðŸ“„ cpk storage folder:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left"/>
            <TextBlock x:Name="CpkStorageDescription" Grid.Column="1" Text="Opens shared storage. Copy any cpk_list.cfg.bin files here (you can keep multiple)." 
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource TextBrush}" Margin="4,0"/>
            <Button x:Name="OpenCpkStorageButton" Grid.Column="2" Content="Open folder" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="120" Click="OpenCpkStorage_Click" Margin="4,0"/>
        </Grid>

        <!-- Viola storage -->
        <Grid Grid.Row="4" Margin="0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="ViolaCLILabel" Grid.Column="0" Content="âš™ï¸ Viola CLI folder:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left"/>
            <TextBlock x:Name="ViolaCLIDescription" Grid.Column="1" Text="Place a single Viola CLI executable here. The app will use the one it finds." 
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource TextBrush}" Margin="4,0"/>
            <Button x:Name="OpenViolaStorageButton" Grid.Column="2" Content="Open folder" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="120" Click="OpenViolaStorage_Click" Margin="4,0"/>
        </Grid>

        <!-- Language Selector -->
        <Grid Grid.Row="5" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="LanguageLabel" Grid.Column="0" Content="ðŸŒ Language:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <ComboBox Grid.Column="1" x:Name="LanguageComboBox"
                      SelectionChanged="LanguageComboBox_SelectionChanged"
                      Foreground="{DynamicResource TextBrightBrush}"
                      Margin="4,0"
                      Width="350"
                      HorizontalAlignment="Left">
                <ComboBox.ItemContainerStyle>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Foreground" Value="{StaticResource TextBrightBrush}"/>
                        <Setter Property="Width" Value="350"/>
                    </Style>
                </ComboBox.ItemContainerStyle>
                <ComboBox.Resources>
                    <Style TargetType="ToggleButton">
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="Foreground" Value="{StaticResource TextBrightBrush}"/>
                        <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          RecognizesAccessKey="True"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentHoverBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentActiveBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentActiveBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                                     Color="{Binding Source={StaticResource TextBrightBrush}, Path=Color}"/>
                </ComboBox.Resources>
                <ComboBoxItem Content="System" Tag="System"/>
                <ComboBoxItem Content="English" Tag="en-US"/>
                <ComboBoxItem Content="EspaÃ±ol" Tag="es-ES"/>
            </ComboBox>
        </Grid>

        <!-- Theme Selector -->
        <Grid Grid.Row="6" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="ThemeLabel" Grid.Column="0" Content="ðŸŽ¨ Theme:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <ComboBox Grid.Column="1" x:Name="ThemeComboBox"
                      SelectionChanged="ThemeComboBox_SelectionChanged"
                      Foreground="{DynamicResource TextBrightBrush}"
                      Margin="4,0"
                      Width="350"
                      HorizontalAlignment="Left">
                <ComboBox.ItemContainerStyle>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Foreground" Value="{StaticResource TextBrightBrush}"/>
                        <Setter Property="Width" Value="350"/>
                    </Style>
                </ComboBox.ItemContainerStyle>
                <ComboBox.Resources>
                    <Style TargetType="ToggleButton">
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="Foreground" Value="{StaticResource TextBrightBrush}"/>
                        <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                        <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="SnapsToDevicePixels" Value="True"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          RecognizesAccessKey="True"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentHoverBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentActiveBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource AccentActiveBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                                     Color="{Binding Source={StaticResource TextBrightBrush}, Path=Color}"/>
                </ComboBox.Resources>
                <ComboBoxItem Content="System" Tag="System"/>
                <ComboBoxItem Content="Light" Tag="Light"/>
                <ComboBoxItem Content="Dark" Tag="Dark"/>
            </ComboBox>
        </Grid>

        <!-- Show Technical Logs -->
        <Grid Grid.Row="7" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="ShowTechnicalLogsLabel" Grid.Column="0" Content="ðŸ”§ Show Technical Logs:" 
                   Foreground="{DynamicResource TextBrush}" 
                   Width="220" HorizontalAlignment="Left" VerticalAlignment="Center"/>
            <ToggleButton x:Name="ShowTechnicalLogsToggle" Grid.Column="1"
                         IsChecked="{Binding ShowTechnicalLogs, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                         Checked="ShowTechnicalLogsToggle_Changed"
                         Unchecked="ShowTechnicalLogsToggle_Changed"
                         Width="50" Height="26"
                         Margin="4,0"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Left"
                         Style="{StaticResource ToggleSwitchStyle}"/>
            <TextBlock Grid.Column="2" x:Name="ShowTechnicalLogsDescription"
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource TextBrush}"
                       Margin="8,0,0,0"
                       VerticalAlignment="Center"/>
        </Grid>

        <!-- Backups -->
        <Grid Grid.Row="8" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="CreateBackupButton" Grid.Column="0" Content="ðŸ’¾ Create Backup" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Margin="0,0,4,0"
                    Click="CreateBackup_Click"/>
            <Button x:Name="RestoreBackupButton" Grid.Column="1" Content="â¤´ Restore Backup" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Margin="4,0,0,0"
                    Click="RestoreBackup_Click"/>
        </Grid>

        <!-- Updates and Links -->
        <Grid Grid.Row="9" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="CheckForUpdatesButton" Grid.Column="0" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Margin="0,0,4,0"
                    Click="CheckForUpdates_Click">
                <StackPanel x:Name="CheckForUpdatesButtonContent" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Path Data="M12,4V1L8,5L12,9V6C15.31,6 18,8.69 18,12C18,15.31 15.31,18 12,18C8.69,18 6,15.31 6,12H4C4,16.42 7.58,20 12,20C16.42,20 20,16.42 20,12C20,7.58 16.42,4 12,4Z" 
                          Fill="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}"
                          Width="16" Height="16" 
                          Stretch="Uniform"
                          Margin="0,0,6,0"
                          VerticalAlignment="Center"/>
                    <TextBlock x:Name="CheckForUpdatesButtonText" 
                               Text="Check for Updates"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            <Button x:Name="LinksButton" Grid.Column="1" Content="ðŸ“¥ Links" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Margin="4,0,0,0"
                    Click="Links_Click"/>
        </Grid>

        <!-- Spacer -->
        <Grid Grid.Row="10"/>

        <!-- Close Button -->
        <Button x:Name="CloseButton" Grid.Row="11" Content="Close" 
                Style="{StaticResource PrimaryButtonStyle}" 
                Width="140" HorizontalAlignment="Right" 
                Click="Close_Click" Margin="0,20,0,0"/>
    </Grid>
</Window>

